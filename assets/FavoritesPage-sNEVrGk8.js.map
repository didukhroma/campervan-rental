{"version":3,"file":"FavoritesPage-sNEVrGk8.js","sources":["../../src/components/Favorites/Favorites.jsx","../../src/pages/FavoritesPage.jsx"],"sourcesContent":["import { useDispatch, useSelector } from 'react-redux';\r\nimport { useCallback, useEffect, useState } from 'react';\r\n\r\nimport {\r\n  selectError,\r\n  selectFavorites,\r\n  selectIsLoading,\r\n  setError,\r\n  startLoader,\r\n  stopLoader,\r\n} from '../../reduxState/slice';\r\n\r\nimport { fetchCamperInfoById } from '../../services/api';\r\n\r\nimport { prepareSingleData } from '../../helpers/prepareData';\r\n\r\nimport { CampersList, Error, Loader } from '../';\r\n\r\nimport styles from './Favorites.module.css';\r\n\r\nexport const Favorites = () => {\r\n  const [campers, setCampers] = useState([]);\r\n  const dispatch = useDispatch();\r\n\r\n  const favorites = useSelector(selectFavorites);\r\n  const isLoading = useSelector(selectIsLoading);\r\n  const errorMessage = useSelector(selectError);\r\n\r\n  const fetchCampersByIds = useCallback(async () => {\r\n    if (!favorites.length) return;\r\n\r\n    try {\r\n      dispatch(startLoader());\r\n      dispatch(setError(null));\r\n      const data = await Promise.all(\r\n        favorites.map(async el => {\r\n          const data = await fetchCamperInfoById(el);\r\n          return prepareSingleData(data);\r\n        })\r\n      );\r\n      setCampers(data);\r\n    } catch (error) {\r\n      dispatch(setError(error.message));\r\n    } finally {\r\n      setTimeout(() => {\r\n        dispatch(stopLoader());\r\n      }, 500);\r\n    }\r\n\r\n    return () => {\r\n      setCampers([]);\r\n    };\r\n  }, [dispatch, favorites]);\r\n\r\n  useEffect(() => {\r\n    dispatch(setError(null));\r\n    fetchCampersByIds();\r\n  }, [fetchCampersByIds, dispatch]);\r\n\r\n  return (\r\n    <>\r\n      {!favorites.length && (\r\n        <p className={styles.text}>\r\n          No campers here. Please add some campers to favorites.\r\n        </p>\r\n      )}\r\n\r\n      {!errorMessage && !!favorites.length && <CampersList data={campers} />}\r\n\r\n      {isLoading && <Loader />}\r\n      {errorMessage && <Error message={errorMessage} />}\r\n    </>\r\n  );\r\n};\r\n","import { Favorites } from '../components';\r\n\r\nconst FavoritesPage = () => <Favorites />;\r\n\r\nexport default FavoritesPage;\r\n"],"names":["Favorites","campers","setCampers","useState","dispatch","useDispatch","favorites","useSelector","selectFavorites","isLoading","selectIsLoading","errorMessage","selectError","fetchCampersByIds","useCallback","startLoader","setError","data","el","fetchCamperInfoById","prepareSingleData","error","stopLoader","useEffect","jsxs","Fragment","jsx","styles","CampersList","Loader","Error","FavoritesPage"],"mappings":"8MAoBaA,EAAY,IAAM,CAC7B,KAAM,CAACC,EAASC,CAAU,EAAIC,EAAA,SAAS,CAAE,CAAA,EACnCC,EAAWC,IAEXC,EAAYC,EAAYC,CAAe,EACvCC,EAAYF,EAAYG,CAAe,EACvCC,EAAeJ,EAAYK,CAAW,EAEtCC,EAAoBC,EAAAA,YAAY,SAAY,CAChD,GAAKR,EAAU,OAEX,IAAA,CACFF,EAASW,GAAa,EACbX,EAAAY,EAAS,IAAI,CAAC,EACjB,MAAAC,EAAO,MAAM,QAAQ,IACzBX,EAAU,IAAI,MAAMY,GAAM,CAClBD,MAAAA,EAAO,MAAME,EAAoBD,CAAE,EACzC,OAAOE,EAAkBH,CAAI,CAAA,CAC9B,CAAA,EAEHf,EAAWe,CAAI,QACRI,EAAO,CACLjB,EAAAY,EAASK,EAAM,OAAO,CAAC,CAAA,QAChC,CACA,WAAW,IAAM,CACfjB,EAASkB,GAAY,GACpB,GAAG,CACR,CAEA,MAAO,IAAM,CACXpB,EAAW,CAAE,CAAA,CAAA,EACf,EACC,CAACE,EAAUE,CAAS,CAAC,EAExBiB,OAAAA,EAAAA,UAAU,IAAM,CACLnB,EAAAY,EAAS,IAAI,CAAC,EACLH,GAAA,EACjB,CAACA,EAAmBT,CAAQ,CAAC,EAI3BoB,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAA,CAACnB,EAAU,QACVoB,EAAA,IAAC,KAAE,UAAWC,EAAO,KAAM,SAE3B,yDAAA,EAGD,CAAChB,GAAgB,CAAC,CAACL,EAAU,QAAUoB,EAAA,IAACE,EAAY,CAAA,KAAM3B,EAAS,EAEnEQ,SAAcoB,EAAO,EAAA,EACrBlB,GAAgBe,EAAAA,IAACI,EAAM,CAAA,QAASnB,CAAc,CAAA,CACjD,CAAA,CAAA,CAEJ,ECvEMoB,EAAgB,IAAML,MAAC1B,EAAU,CAAA,CAAA"}
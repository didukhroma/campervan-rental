{"version":3,"file":"CatalogPage-BIy4imxA.js","sources":["../../src/helpers/filteredCampers.js","../../src/components/Catalog/Catalog.jsx","../../src/components/Filters/Filters.jsx","../../src/components/LocationInput/LocationInput.jsx","../../src/components/FormCheckbox/FormCheckbox.jsx","../../src/components/FormRadioButton/FormRadioButton.jsx","../../src/pages/CatalogPage.jsx"],"sourcesContent":["export const filteredCampers = (data, filter) => {\r\n  if (!filter) return data;\r\n\r\n  let newData = [...data];\r\n\r\n  if (filter.location) {\r\n    newData = newData.filter(({ location: { city } }) =>\r\n      city.toLowerCase().includes(filter.location.toLowerCase())\r\n    );\r\n  }\r\n\r\n  if (filter.type) {\r\n    newData = newData.filter(\r\n      ({ form }) => form.toLowerCase() === filter.type.toLowerCase()\r\n    );\r\n  }\r\n\r\n  const filteredKeys = Object.keys(filter.details).filter(\r\n    el => filter.details[el]\r\n  );\r\n\r\n  if (filteredKeys.length === 0) return newData;\r\n\r\n  newData = newData.filter(({ details }) => {\r\n    return filteredKeys.filter(el => details[el]).length > 0;\r\n  });\r\n\r\n  return newData;\r\n};\r\n","import { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { fetchCampers } from '../../reduxState/operations';\r\nimport {\r\n  clearError,\r\n  nextPage,\r\n  selectCampersList,\r\n  selectError,\r\n  selectFilter,\r\n  selectIsLoading,\r\n  selectPage,\r\n} from '../../reduxState/slice';\r\n\r\nimport { Filters, CampersList, Loader, Error } from '../';\r\n\r\nimport styles from './Catalog.module.css';\r\nimport { filteredCampers } from '../../helpers/filteredCampers';\r\n\r\nexport const Catalog = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const campersList = useSelector(selectCampersList);\r\n  const page = useSelector(selectPage);\r\n  const isLoading = useSelector(selectIsLoading);\r\n  const errorMessage = useSelector(selectError);\r\n  const filter = useSelector(selectFilter);\r\n\r\n  const filteredCampersList = filteredCampers(campersList, filter);\r\n\r\n  const handleClickLoadMore = () => dispatch(nextPage());\r\n\r\n  useEffect(() => {\r\n    dispatch(clearError());\r\n\r\n    dispatch(fetchCampers(page));\r\n  }, [dispatch, page, filter]);\r\n\r\n  return (\r\n    <>\r\n      {!errorMessage && (\r\n        <div className={styles.wrapper}>\r\n          <Filters />\r\n          {filteredCampersList.length !== 0 ? (\r\n            <CampersList\r\n              data={filteredCampersList}\r\n              cbOnClick={handleClickLoadMore}\r\n              page={page}\r\n            />\r\n          ) : (\r\n            <div className={styles.textWrapper}>\r\n              <p className={styles.text}>Please change search parameters</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n      {isLoading && <Loader />}\r\n      {errorMessage && <Error message={errorMessage} />}\r\n    </>\r\n  );\r\n};\r\n","import { useDispatch } from 'react-redux';\r\nimport clsx from 'clsx';\r\nimport { FormCheckbox, Button, LocationInput, FormRadioButton } from '../';\r\nimport styles from './Filters.module.css';\r\n\r\nimport { setFilter as setNewFilter } from '../../reduxState/slice';\r\nimport { useState } from 'react';\r\n\r\nconst vehicleEquipmentData = ['AC', 'Automatic', 'Kitchen', 'TV', 'Shower'];\r\n\r\nexport const Filters = () => {\r\n  const [filter, setFilter] = useState({\r\n    location: '',\r\n    details: {\r\n      automatic: false,\r\n      kitchen: false,\r\n      tv: false,\r\n      shower: false,\r\n      ac: false,\r\n    },\r\n    type: '',\r\n  });\r\n\r\n  const handleChangeType = type => {\r\n    setFilter(prev => ({ ...prev, type }));\r\n  };\r\n\r\n  const handleChangeLocation = e => {\r\n    setFilter(prev => ({ ...prev, location: e.target.value.trim() }));\r\n  };\r\n\r\n  const handleChangeCheckbox = e => {\r\n    const equipmentName = e.target.name.toLowerCase();\r\n    setFilter(prev => ({\r\n      ...prev,\r\n      details: { ...prev.details, [equipmentName]: e.target.checked },\r\n    }));\r\n  };\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    dispatch(setNewFilter(filter));\r\n  };\r\n  return (\r\n    <form className={styles.form} onSubmit={handleSubmit}>\r\n      <div className={styles.locationWrapper}>\r\n        <h3 className={clsx(styles.title, styles.location)}>Location</h3>\r\n        <LocationInput handleChange={handleChangeLocation} />\r\n      </div>\r\n\r\n      <h3 className={styles.title}>Filters</h3>\r\n      <div className={styles.subTitleWrapper}>\r\n        <h4 className={styles.subtitle}>Vehicle equipment</h4>\r\n      </div>\r\n      <FormCheckbox\r\n        options={vehicleEquipmentData}\r\n        width=\"32\"\r\n        height=\"32\"\r\n        handleClick={handleChangeCheckbox}\r\n      />\r\n      <div className={styles.subTitleWrapper}>\r\n        <h4 className={styles.subtitle}>Vehicle type</h4>\r\n      </div>\r\n\r\n      <FormRadioButton handleChangeType={handleChangeType} />\r\n      <Button text=\"Search\" bgColor=\"red\" type=\"submit\" />\r\n    </form>\r\n  );\r\n};\r\n","import { Icon } from '../';\r\nimport styles from './LocationInput.module.css';\r\n\r\nexport const LocationInput = ({ handleChange }) => {\r\n  return (\r\n    <label className={styles.label}>\r\n      <span className={styles.iconWrapper}>\r\n        <Icon id=\"location\" width=\"18\" height=\"20\" className={styles.icon} />\r\n      </span>\r\n      <input\r\n        className={styles.input}\r\n        type=\"text\"\r\n        placeholder=\"City\"\r\n        onChange={handleChange}\r\n        autoComplete=\"\"\r\n      />\r\n    </label>\r\n  );\r\n};\r\n","import { FormField, Icon } from '../';\r\nimport styles from './FormCheckbox.module.css';\r\nexport const FormCheckbox = ({ name, options, width, height, handleClick }) => {\r\n  return (\r\n    <ul className={styles.list}>\r\n      {options.map(el => (\r\n        <li key={`${name}-${el}`}>\r\n          <FormField type=\"checkbox\" name={el} cbOnChange={handleClick}>\r\n            <Icon id={el.toLowerCase()} width={width} height={height} />\r\n          </FormField>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n","import { Icon } from '../Icon/Icon';\r\n\r\nimport styles from './FormRadioButton.module.css';\r\n\r\nexport const FormRadioButton = ({ handleChangeType }) => {\r\n  const cbOnChange = e => {\r\n    handleChangeType(e.target.value);\r\n  };\r\n  return (\r\n    <fieldset className={styles.fieldset}>\r\n      <label className={styles.label}>\r\n        <span>\r\n          <Icon id=\"van\" width=\"40\" height=\"28\" />\r\n        </span>\r\n        <span className={styles.text}>Van</span>\r\n        <input\r\n          onChange={cbOnChange}\r\n          className={styles.input}\r\n          type=\"radio\"\r\n          name=\"vehicleType\"\r\n          value=\"panelTruck\"\r\n        />\r\n      </label>\r\n      <label className={styles.label}>\r\n        <span>\r\n          <Icon id=\"fully-integrated\" width=\"40\" height=\"28\" />\r\n        </span>\r\n        <span className={styles.text}>Fully Integrated</span>\r\n        <input\r\n          onChange={cbOnChange}\r\n          className={styles.input}\r\n          type=\"radio\"\r\n          name=\"vehicleType\"\r\n          value=\"fullyIntegrated\"\r\n        />\r\n      </label>\r\n      <label className={styles.label}>\r\n        <span>\r\n          <Icon id=\"alcove\" width=\"40\" height=\"28\" />\r\n        </span>\r\n        <span className={styles.text}>Alcove</span>\r\n        <input\r\n          onChange={cbOnChange}\r\n          className={styles.input}\r\n          type=\"radio\"\r\n          name=\"vehicleType\"\r\n          value=\"alcove\"\r\n        />\r\n      </label>\r\n    </fieldset>\r\n  );\r\n};\r\n","import { Catalog } from '../components';\r\n\r\nconst CatalogPage = () => <Catalog />;\r\n\r\nexport default CatalogPage;\r\n"],"names":["filteredCampers","data","filter","newData","city","form","filteredKeys","el","details","Catalog","dispatch","useDispatch","campersList","useSelector","selectCampersList","page","selectPage","isLoading","selectIsLoading","errorMessage","selectError","selectFilter","filteredCampersList","handleClickLoadMore","nextPage","useEffect","clearError","fetchCampers","jsxs","Fragment","styles","jsx","Filters","CampersList","Loader","Error","vehicleEquipmentData","setFilter","useState","handleChangeType","type","prev","handleChangeLocation","e","handleChangeCheckbox","equipmentName","handleSubmit","setNewFilter","clsx","LocationInput","FormCheckbox","FormRadioButton","Button","handleChange","Icon","name","options","width","height","handleClick","FormField","cbOnChange","CatalogPage"],"mappings":"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"}